{"version":3,"sources":["validateDeprecatedOptions.tsx"],"names":["shownWarnings","validations","check","o","headerForceInset","deprecated","updated","compat","rest","safeAreaInsets","top","bottom","left","right","undefined","gesturesEnabled","gestureEnabled","header","headerShown","headerTitle","map","p","validateDeprecatedOptions","options","result","warnings","forEach","v","process","env","NODE_ENV","includes","push","length","console","warn","join"],"mappings":"AAUA,MAAMA,aAAuB,GAAG,EAAhC;AAEA,MAAMC,WAAyB,GAAG,CAChC;AACEC,EAAAA,KAAK,EAAGC,CAAD,IAAO,OAAOA,CAAC,CAACC,gBAAT,KAA8B,QAD9C;AAEEC,EAAAA,UAAU,EAAE,kBAFd;AAGEC,EAAAA,OAAO,EAAE,gBAHX;AAIEC,EAAAA,MAAM,EAAGJ,CAAD,IAAO;AACb,UAAM;AAAEC,MAAAA,gBAAF;AAAoB,SAAGI;AAAvB,QAAgCL,CAAtC;AAEA,QAAIM,cAA+C,GAAG;AACpDC,MAAAA,GAAG,EAAE,CAD+C;AAEpDC,MAAAA,MAAM,EAAE,CAF4C;AAGpDC,MAAAA,IAAI,EAAE,CAH8C;AAIpDC,MAAAA,KAAK,EAAE;AAJ6C,KAAtD;;AAOA,YAAQT,gBAAR;AACE,WAAK,KAAL;AACE,eAAOK,cAAc,CAACC,GAAtB;AACA;;AACF,WAAK,QAAL;AACE,eAAOD,cAAc,CAACE,MAAtB;AACA;;AACF,WAAK,MAAL;AACE,eAAOF,cAAc,CAACG,IAAtB;AACA;;AACF,WAAK,OAAL;AACE,eAAOH,cAAc,CAACI,KAAtB;AACA;;AACF,WAAK,UAAL;AACE,eAAOJ,cAAc,CAACC,GAAtB;AACA,eAAOD,cAAc,CAACE,MAAtB;AACA;;AACF,WAAK,YAAL;AACE,eAAOF,cAAc,CAACG,IAAtB;AACA,eAAOH,cAAc,CAACI,KAAtB;AACA;;AACF,WAAK,QAAL;AACEJ,QAAAA,cAAc,GAAGK,SAAjB;AACA;AAvBJ;;AA0BA,WAAO,EAAE,GAAGN,IAAL;AAAWC,MAAAA;AAAX,KAAP;AACD;AAzCH,CADgC,EA4ChC;AACEP,EAAAA,KAAK,EAAGC,CAAD,IAAOA,CAAC,CAACY,eAAF,KAAsBD,SADtC;AAEET,EAAAA,UAAU,EAAE,iBAFd;AAGEC,EAAAA,OAAO,EAAE,gBAHX;AAIEC,EAAAA,MAAM,EAAGJ,CAAD,IAAO;AACb,UAAM;AAAEY,MAAAA,eAAF;AAAmB,SAAGP;AAAtB,QAA+BL,CAArC;AAEA,WAAO,EAAE,GAAGK,IAAL;AAAWQ,MAAAA,cAAc,EAAED;AAA3B,KAAP;AACD;AARH,CA5CgC,EAsDhC;AACEb,EAAAA,KAAK,EAAGC,CAAD,IAAOA,CAAC,CAACc,MAAF,KAAa,IAD7B;AAEEZ,EAAAA,UAAU,EAAE,cAFd;AAGEC,EAAAA,OAAO,EAAE,oBAHX;AAIEC,EAAAA,MAAM,EAAGJ,CAAD,IAAO;AACb;AACA,UAAM;AAAEc,MAAAA,MAAF;AAAU,SAAGT;AAAb,QAAsBL,CAA5B;AAEA,WAAO,EAAE,GAAGK,IAAL;AAAWU,MAAAA,WAAW,EAAE;AAAxB,KAAP;AACD;AATH,CAtDgC,EAiEhC;AACEhB,EAAAA,KAAK,EAAGC,CAAD,IAAOA,CAAC,CAACc,MAAF,IAAY,IAAZ,IAAoB,OAAOd,CAAC,CAACc,MAAT,KAAoB,UADxD;AAEEZ,EAAAA,UAAU,EAAE,yBAFd;AAGEC,EAAAA,OAAO,EAAE,+BAHX;AAIEC,EAAAA,MAAM,EAAGJ,CAAD,KAAQ,EAAE,GAAGA,CAAL;AAAQc,IAAAA,MAAM,EAAE,MAAMd,CAAC,CAACc;AAAxB,GAAR;AAJV,CAjEgC,EAuEhC;AACEf,EAAAA,KAAK,EAAGC,CAAD,IACLA,CAAC,CAACgB,WAAF,KAAkBL,SAAlB,IACA,OAAOX,CAAC,CAACgB,WAAT,KAAyB,QADzB,IAEA,OAAOhB,CAAC,CAACgB,WAAT,KAAyB,UAJ7B;AAKEd,EAAAA,UAAU,EAAE,8BALd;AAMEC,EAAAA,OAAO,EAAE,oCANX;AAOEC,EAAAA,MAAM,EAAGJ,CAAD,KAAQ,EAAE,GAAGA,CAAL;AAAQgB,IAAAA,WAAW,EAAE,MAAMhB,CAAC,CAACgB;AAA7B,GAAR;AAPV,CAvEgC,EAgFhC,GAAG,CAAC,YAAD,EAAe,aAAf,EAA8B,kBAA9B,EAAkD,iBAAlD,EAAqEC,GAArE,CACAC,CAAD,KAAoB;AAClBnB,EAAAA,KAAK,EAAGC,CAAD,IAAYA,CAAC,CAACkB,CAAD,CAAD,KAASP,SAAT,IAAsB,OAAOX,CAAC,CAACkB,CAAD,CAAR,KAAgB,UADvC;AAElBhB,EAAAA,UAAU,YAAKgB,CAAL,sBAFQ;AAGlBf,EAAAA,OAAO,YAAKe,CAAL,4BAHW;AAIlBd,EAAAA,MAAM,EAAGJ,CAAD,KAAQ,EAAE,GAAGA,CAAL;AAAQ,KAACkB,CAAD,GAAK,MAAMlB,CAAC,CAACkB,CAAD;AAApB,GAAR;AAJU,CAApB,CADC,CAhF6B,CAAlC;AA0FA,eAAe,SAASC,yBAAT,CACbC,OADa,EAEb;AACA,MAAIC,MAAM,GAAGD,OAAb;AAEA,QAAME,QAAsB,GAAG,EAA/B,CAHA,CAKA;;AACAxB,EAAAA,WAAW,CAACyB,OAAZ,CAAqBC,CAAD,IAAO;AACzB,QAAIA,CAAC,CAACzB,KAAF,CAAQqB,OAAR,CAAJ,EAAsB;AACpBC,MAAAA,MAAM,GAAGG,CAAC,CAACpB,MAAF,CAASiB,MAAT,CAAT;;AAEA,UAAII,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzC,YAAI9B,aAAa,CAAC+B,QAAd,CAAuBJ,CAAC,CAACtB,UAAzB,CAAJ,EAA0C;AACxC;AACD;;AAEDoB,QAAAA,QAAQ,CAACO,IAAT,CAAcL,CAAd;AACA3B,QAAAA,aAAa,CAACgC,IAAd,CAAmBL,CAAC,CAACtB,UAArB;AACD;AACF;AACF,GAbD;;AAeA,MAAIoB,QAAQ,CAACQ,MAAb,EAAqB;AACnBC,IAAAA,OAAO,CAACC,IAAR,gDAC0CV,QAAQ,CAC7CL,GADqC,CAEnCO,CAAD,iBACQA,CAAC,CAACtB,UADV,yDACmEsB,CAAC,CAACrB,OADrE,cAFoC,EAKrC8B,IALqC,CAKhC,IALgC,CAD1C;AAQD;;AAED,SAAOZ,MAAP;AACD","sourcesContent":["import type { EdgeInsets } from 'react-native-safe-area-context';\r\nimport type { StackNavigationOptions } from '../vendor/types';\r\n\r\ntype Validation = {\r\n  check: (o: Record<string, any>) => boolean;\r\n  deprecated: string;\r\n  updated: string;\r\n  compat: (o: Record<string, any>) => StackNavigationOptions;\r\n};\r\n\r\nconst shownWarnings: string[] = [];\r\n\r\nconst validations: Validation[] = [\r\n  {\r\n    check: (o) => typeof o.headerForceInset === 'object',\r\n    deprecated: 'headerForceInset',\r\n    updated: 'safeAreaInsets',\r\n    compat: (o) => {\r\n      const { headerForceInset, ...rest } = o;\r\n\r\n      let safeAreaInsets: Partial<EdgeInsets> | undefined = {\r\n        top: 0,\r\n        bottom: 0,\r\n        left: 0,\r\n        right: 0,\r\n      };\r\n\r\n      switch (headerForceInset) {\r\n        case 'top':\r\n          delete safeAreaInsets.top;\r\n          break;\r\n        case 'bottom':\r\n          delete safeAreaInsets.bottom;\r\n          break;\r\n        case 'left':\r\n          delete safeAreaInsets.left;\r\n          break;\r\n        case 'right':\r\n          delete safeAreaInsets.right;\r\n          break;\r\n        case 'vertical':\r\n          delete safeAreaInsets.top;\r\n          delete safeAreaInsets.bottom;\r\n          break;\r\n        case 'horizontal':\r\n          delete safeAreaInsets.left;\r\n          delete safeAreaInsets.right;\r\n          break;\r\n        case 'always':\r\n          safeAreaInsets = undefined;\r\n          break;\r\n      }\r\n\r\n      return { ...rest, safeAreaInsets };\r\n    },\r\n  },\r\n  {\r\n    check: (o) => o.gesturesEnabled !== undefined,\r\n    deprecated: 'gesturesEnabled',\r\n    updated: 'gestureEnabled',\r\n    compat: (o) => {\r\n      const { gesturesEnabled, ...rest } = o;\r\n\r\n      return { ...rest, gestureEnabled: gesturesEnabled };\r\n    },\r\n  },\r\n  {\r\n    check: (o) => o.header === null,\r\n    deprecated: 'header: null',\r\n    updated: 'headerShown: false',\r\n    compat: (o) => {\r\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n      const { header, ...rest } = o;\r\n\r\n      return { ...rest, headerShown: false };\r\n    },\r\n  },\r\n  {\r\n    check: (o) => o.header != null && typeof o.header !== 'function',\r\n    deprecated: 'header: <SomeElement />',\r\n    updated: 'header: () => <SomeElement />',\r\n    compat: (o) => ({ ...o, header: () => o.header }),\r\n  },\r\n  {\r\n    check: (o) =>\r\n      o.headerTitle !== undefined &&\r\n      typeof o.headerTitle !== 'string' &&\r\n      typeof o.headerTitle !== 'function',\r\n    deprecated: 'headerTitle: <SomeElement />',\r\n    updated: 'headerTitle: () => <SomeElement />',\r\n    compat: (o) => ({ ...o, headerTitle: () => o.headerTitle }),\r\n  },\r\n  ...['headerLeft', 'headerRight', 'headerBackground', 'headerBackImage'].map(\r\n    (p): Validation => ({\r\n      check: (o: any) => o[p] !== undefined && typeof o[p] !== 'function',\r\n      deprecated: `${p}: <SomeElement />`,\r\n      updated: `${p}: () => <SomeElement />`,\r\n      compat: (o) => ({ ...o, [p]: () => o[p] }),\r\n    })\r\n  ),\r\n];\r\n\r\nexport default function validateDeprecatedOptions(\r\n  options: StackNavigationOptions\r\n) {\r\n  let result = options;\r\n\r\n  const warnings: Validation[] = [];\r\n\r\n  // Validate options to show warnings for deprecations\r\n  validations.forEach((v) => {\r\n    if (v.check(options)) {\r\n      result = v.compat(result);\r\n\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        if (shownWarnings.includes(v.deprecated)) {\r\n          return;\r\n        }\r\n\r\n        warnings.push(v);\r\n        shownWarnings.push(v.deprecated);\r\n      }\r\n    }\r\n  });\r\n\r\n  if (warnings.length) {\r\n    console.warn(\r\n      `Deprecation in 'navigationOptions':\\n${warnings\r\n        .map(\r\n          (v) =>\r\n            `- '${v.deprecated}' will be removed in a future version. Use '${v.updated}' instead`\r\n        )\r\n        .join('\\n')}`\r\n    );\r\n  }\r\n\r\n  return result;\r\n}\r\n"]}